---
title: PTA团队天梯赛║L1-009 N个数求和
date: 2021-01-06  20:23:45
updated: 2021-01-06  20:23:45
tags: PTA
categories: PTA刷题笔记
description:
---
## 一、题目要求

本题的要求很简单，就是求`N`个数字的和。麻烦的是，这些数字是以有理数`分子/分母`的形式给出的，你输出的和也必须是有理数的形式。

### 输入格式：

输入第一行给出一个正整数`N`（≤100）。随后一行按格式`a1/b1 a2/b2 ...`给出`N`个有理数。题目保证所有分子和分母都在长整型范围内。另外，负数的符号一定出现在分子前面。

### 输出格式：

输出上述数字和的最简形式 —— 即将结果写成`整数部分 分数部分`，其中分数部分写成`分子/分母`，要求分子小于分母，且它们没有公因子。如果结果的整数部分为 0，则只输出分数部分。

### 输入样例 1：

```in
5
2/5 4/15 1/30 -2/60 8/3
```

### 输出样例 1：

```out
3 1/3
```

### 输入样例 2：

```in
2
4/3 2/3
```

### 输出样例 2：

```out
2
```

### 输入样例 3：

```in
3
1/3 -1/6 1/8
```

### 输出样例 3：

```
7/24
```

## 二、解题思路

分数的和问题归根结底是通分时求最小公倍数和最大公因数的问题，将分子和分母分开进行运算，先求出所有分母的最小公倍数作为通分后的分母，然后求出通分后的分子之和，最后化简即可

## 三、代码

```cpp
#include <iostream>
#include <stdio.h>
#include <cmath>

using namespace std;

long int gcd(long int a, long int b)    //求最大公因数
{
    return a%b==0 ? b : gcd(b,a%b);
}

int main()
{
    int a[100], b[100]; //存放输入的分子和分母
    long int s1 = 0;     //存放所有分数通分后的分子之和
    long int s2 = 1;     //存放当前分母最小的公倍数
    int N;
    cin >> N;
    for(int i=0; i<N; i++)
    {
        scanf("%d/%d", &a[i],&b[i]);
    }
    s2 = b[0];  //将 b[0] 作为初始分母最小公倍数

    for(int i=0; i<N; i++)  //求出分母的最小公倍数
    {
        s2 = s2*b[i] / gcd(s2,b[i]);
    }
    for(int i=0; i<N; i++)  //求出通分后的分子之和
    {
        s1 += s2/b[i] * a[i];
    }
    long int n = s1/s2; //最后结果整数部分
    long int m = abs(s1%s2); //余数
    if(m==0) //结果为整数
    {
        cout << n << endl;
    }
    else
    {
        if(n!=0)    //n==0 时不输出 n
        {
            cout << n << " ";
        }
        if(s1<0)    //如果结果为负数
        {
            cout << "-";
        }
        cout << m/gcd(s2,m) << "/" << s2/gcd(s2,m) << endl;     //将 (分子/分母) 化到最简
    }

    return 0;
}

```

## 四、反思总结

1. 由于输入时要输入分数，对于输入格式有要求，要求是 `a/b` 的格式，因此引入头文件 `#include <stdio.h>` ，利用 C 语言中 *scanf()* 实现更灵活的输入操作。
2. 由于求最小公倍数还有主函数内多次要求最大公因数，因此在主函数前写一个求最大公因数的全局函数大大方便了后续的操作。
3. 最后输出结果控制的时候，起初如果测试数据为负数总会输出错误，后发现是化简部分余数未保持正，因此解决方案是引入头文件 `#include <cmath>` 中 *abs()* 取绝对值。